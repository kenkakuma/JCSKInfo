import { allPosts } from 'contentlayer/generated'
import { Language } from '@/config/site'
import NewsCard from '@/components/NewsCard'
import WeatherWidget from '@/components/WeatherWidget'
import StockWidget from '@/components/StockWidget'

export default async function HomePage({ params }: { params: { lang: Language } }) {
  // 获取当前语言的文章并按日期排序
  const posts = allPosts
    .filter((post) => post.lang === params.lang)
    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-[#1a1d29]">
      <div className="container mx-auto px-6 py-6">
        <div className="flex gap-5">
          {/* 左侧主内容区 */}
          <div className="flex-1">
            {/* 单列列表布局 */}
            <div className="space-y-8">
              {posts.map((post) => (
                <NewsCard key={post._id} post={post} />
              ))}
            </div>
          </div>

          {/* 右侧边栏 */}
          <aside className="w-[340px] flex-shrink-0 space-y-4">
            {/* 天气组件 */}
            <WeatherWidget />

            {/* 股票信息组件 */}
            <StockWidget />
          </aside>
        </div>
      </div>
    </div>
  )
}
